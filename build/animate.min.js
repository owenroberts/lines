!function(){"use strict";const e={updateProperty(e,a){for(let t=0;t<this.layers.length-1;t++)this.layers[t].isToggled&&(this.layers[t][a]=e)},addLayer(e){-1==this.layers.indexOf(e)&&this.layers.splice(c.anim.layers.length-1,0,e)},removeLayer(e){const a=this.layers.indexOf(e);a>=0&&this.layers.splice(a,1)},updateStates(){for(const e in this.states)this.states[e].end>this.endFrame&&(this.states[e].end=this.endFrame)},merge(e,a,t){const n=c.anim.drawings[e],r=c.anim.drawings[a];for(let e=0,a=r.length;e<a;e++)n.add(r.pop());t||console.warn("No layer"),c.anim.drawings[a]=null,t.drawingEndIndex=n.length},getDrawLayer(){return this.layers[this.layers.length-1]}};const a={init(e){this.isToggled=!1,this.isLocked=!1,this.isHighlighted=!1,this.groupNumber=void 0!==e.groupNumber?e.groupNumber:-1},reset(){this.isToggled=!1,this.isLocked=!1,this.isHighlighted=!1,this.highlightColor="#94dfe3"},toggle(){this.isToggled=!this.isToggled},isInFrame(e){return e>=this.startFrame&&e<=this.endFrame&&!this.dontDraw},addTween(e){this.tweens.push(e),e.startFrame<this.startFrame&&(this.startFrame=e.startFrame),e.endFrame>this.endFrame&&(this.endFrame=e.endFrame),"default"==c.anim.stateName&&c.anim.state.end<this.endFrame&&(c.anim.state.end=this.endFrame)},resetTweens(){for(let e=0;e<this.tweens.length;e++){const a=this.tweens[e];a.startFrame<this.startFrame&&(a.startFrame=this.startFrame),a.endFrame>this.endFrame&&(a.endFrame=this.endFrame)}},addIndex(e){if(!this.isInFrame(e))if(this.startFrame-1==e)this.startFrame-=1;else{if(this.endFrame+1!=e)return new i({...this.getCloneProps(),startFrame:e,endFrame:e});this.endFrame+=1}return this},removeIndex(e,a){if(this.startFrame===e&&this.endFrame===e)a();else if(this.startFrame===e)this.startFrame+=1;else{if(this.endFrame!==e){if(e>this.startFrame&&e<this.endFrame){const a=new i(this.getCloneProps());return a.startFrame=e+1,a.endFrame=this.endFrame,a.resetTweens(),this.endFrame=e-1,this.resetTweens(),a}return this}this.endFrame-=1}this.resetTweens()},shiftIndex(e,a){return a||(a=-1),this.startFrame>=e&&(this.startFrame+=a),this.endFrame>=e&&(this.endFrame+=a),this.resetTweens(),this},resetDrawingEndIndex(e){this.drawingEndIndex=e},getSaveProps(){const e={n:this.segmentNum,r:this.jiggleRange,w:this.wiggleRange,v:this.wiggleSpeed,ws:this.wiggleSegments,c:this.color,f:[this.startFrame,this.endFrame],d:this.drawingIndex,b:this.breaks,l:this.linesInterval,g:this.groupNumber};return this.x&&(e.x=this.x),this.y&&(e.y=this.y),this.tweens&&(e.t=this.tweens.map((e=>[e.prop,e.startFrame,e.endFrame,e.startValue,e.endValue]))),e},getEditProps(){return{segmentNum:this.segmentNum,jiggleRange:this.jiggleRange,wiggleRange:this.wiggleRange,wiggleSpeed:this.wiggleSpeed,wiggleSegments:this.wiggleSegments,linesInterval:this.linesInterval,breaks:this.breaks,color:this.color}},getTweenProps(){return{segmentNum:this.segmentNum,jiggleRange:this.jiggleRange,wiggleRange:this.wiggleRange,wiggleSpeed:this.wiggleSpeed,wiggleSegments:this.wiggleSegments,linesInterval:this.linesInterval,startIndex:this.drawingStartIndex,endIndex:this.drawingEndIndex}},getCloneProps(){return props={drawingIndex:this.drawingIndex,segmentNum:this.segmentNum,jiggleRange:this.jiggleRange,wiggleRange:this.wiggleRange,wiggleSpeed:this.wiggleSpeed,wiggleSegments:this.wiggleSegments,breaks:this.breaks,linesInterval:this.linesInterval,x:this.x,y:this.y,color:this.color,drawingStartIndex:this.drawingStartIndex,drawingEndIndex:this.drawingEndIndex,startFrame:this.startFrame,endFrame:this.endFrame,groupNumber:this.groupNumber}}};const{Animation:t,Animator:n,Drawing:r,Layer:i,AntiMixin:s,PixelMixin:l}=Lines,{Interface:o}=UI,c={};Object.assign(i.prototype,a),Object.assign(t.prototype,e);const d={};location.search.substr(1).split("&").map((e=>{let[a,t]=e.split("=");d[a]=t})),"pixel"===d.render&&Object.assign(Lines.prototype,l),c.canvas=function(e,a=512,t=512,n="#ffffff",r=!0){const i=document.getElementById(e);let s=r&&window.devicePixelRatio||1,l=1,o=1;const d=i.getContext("2d");function m(){d.miterLimit=1,d.lineCap="round",d.lineJoin="round"}function u(e){i.style.backgroundColor=e}function g(e){a=e,i.width=e*s*l,p()}function f(e){t=e,i.height=e*s*l,p()}function p(){d.scale(1,1),d.scale(s*l,s*l),i.style.zoom=1/s,d.lineWidth=o,m()}function h(){c.draw.reset();let e=0,a={x:1e4,y:1e4},t={x:0,y:0};for(let n=0;n<c.anim.layers.length;n++){const r=c.anim.layers[n],i=c.anim.drawings[r.drawingIndex];for(let n=0;n<i.length;n++){const s=i.points[n];"end"!==s&&"add"!==s&&(e=Math.max(e,4*r.jiggleRange),a.x=Math.min(a.x,s[0]+r.x),a.y=Math.min(a.y,s[1]+r.y),t.x=Math.max(t.x,s[0]+r.x),t.y=Math.max(t.y,s[1]+r.y))}}c.ui.faces.width.update(Math.round(t.x-a.x+2*e)),c.ui.faces.height.update(Math.round(t.y-a.y+2*e));for(let t=0;t<c.anim.layers.length-1;t++)c.anim.layers[t].x-=a.x-e>0?a.x-e:0,c.anim.layers[t].y-=a.y-e>0?a.y-e:0}return d.miterLimit=1,d.lineCap="round",d.lineJoin="round",u(n),g(a),f(t),{connect:function(){c.ui.addCallback({callback:h,text:"Fit Canvas",key:"shift-f"},"canvas"),c.ui.addProps({width:{value:a,callback:e=>{g(e)}},height:{value:t,callback:e=>{f(e)}},lineWidth:{type:"UINumberStep",value:1,range:[1,100],callback:e=>{!function(e){d.lineWidth=o=+e,m()}(e)}},canvasScale:{type:"UINumberStep",value:1,range:[.5,4],step:.05,callback:e=>{!function(e){l=e,g(a),f(t)}(e)}},bgColor:{type:"UIColor",value:n,callback:e=>{u(e)}},hideCursor:{type:"UIToggleCheck",key:"alt-m",callback:e=>{!function(e){e?i.classList.add("no-cursor"):i.classList.remove("no-cursor")}(e)}}},"canvas")},canvas:i,ctx:d}}("lines",512,512,"#ffffff",!0),c.render=function(e=30,a=!1){window.drawCount=0;let t,n,r=1e3/e,i=performance.now(),s=0,l=!1,o=0;function d(){c.anim.isPlaying?c.draw.layer.startFrame=c.draw.layer.endFrame=c.anim.currentFrame:(c.ui.play.checkEnd(),c.draw.reset()),c.anim.isPlaying=!c.anim.isPlaying,c.ui.timeline.update()}function m(e){if(a&&t.begin(),performance.now()>r+i||"cap"==e){if(i=performance.now(),c.anim.isPlaying&&c.ui.timeline.update(),0===o?(c.canvas.ctx.clearRect(0,0,c.canvas.width,c.canvas.height),o=0):o++,c.ui.capture.bg&&(c.ui.capture.frames>0||c.ui.capture.isVideo)&&(c.canvas.ctx.fillStyle=c.canvas.bgColor,c.canvas.ctx.fillRect(0,0,c.canvas.width,c.canvas.height)),c.bgImage.display(),s>0&&l){const e=c.anim.currentFrame;for(let a=1;a<=s;a++){const t=e-a;t>=0&&(c.anim.currentFrame=t,c.anim.overrideProperty("color",`rgba(105,150,255,${1.5-a/s})`),c.anim.draw())}c.anim.cancelOverride(),c.anim.currentFrame=e}if(c.anim.layers.some((e=>e.isHighlighted))){c.anim.overrideProperty("color","#94dfe3");for(let e=0,a=c.anim.layers.length-1;e<a;e++){const a=c.anim.layers[e];a.isInFrame(c.anim.currentFrame)&&a.isHighlighted||(a.dontDraw=!0)}c.canvas.ctx.lineWidth=5,c.anim.draw(0,0,!0),c.anim.cancelOverride(),c.canvas.ctx.lineWidth=c.canvas.lineWidth,c.anim.layers.filter((e=>e.dontDraw)).forEach((e=>{e.dontDraw=!1}))}c.anim.update(),c.anim.draw(),window.drawCount++}c.ui.capture.isCapturing||window.requestAnimFrame(self.update),a&&t.end()}return{connect:function(){n=c.ui.getPanel("play",{label:"Play Back"}),c.ui.addUIs([{callback:d,value:!1,onText:"❚❚",offText:"▶",key:"space"}]),c.ui.addCallbacks([{callback:m,text:"↻",key:"u"}]),c.ui.addProps({fps:{type:"UINumberStep",key:";",value:c.anim.fps,callback:e=>{!function(e){c.anim.fps=e,c.ui.faces.fps.value=c.anim.fps,c.ui.faces.dpf.value=c.anim.dpf}(e)},min:1,prompt:"Set Frames/Second"},dpf:{type:"UINumberStep",value:c.anim.dpf,callback:e=>{!function(e){c.anim.dpf=e,c.ui.faces.fps.value=c.anim.fps}(e)},min:1,prompt:"Set Draws/Frame"},dps:{type:"UINumberStep",key:"'",value:e,callback:a=>{!function(a){r=1e3/(e=a),c.anim.drawsPerFrame=Math.max(1,Math.round(e/c.anim.fps)),c.ui.faces.fps.value=c.anim.fps,c.ui.faces.dpf.value=c.anim.dpf}(a)},prompt:"Set Draw/Second"},onionSkinIsVisible:{type:"UIToggleCheck",value:l,text:"Onion Skin",key:"n",callback:e=>{l=e}},onionSkinNum:{type:"UINumberStep",value:s,key:"l",callback:e=>{s=e}},viewStats:{type:"UIToggleCheck",value:a,callback:e=>{!function(e){void 0!==e&&(a=e),!t&&a&&(t=new Stats,t.dom.style.position="absolute",t.dom.style.top="-48px",t.dom.style.right="0",t.dom.style.left="auto",n.el.appendChild(c.render.stats.dom)),t&&(t.dom.style.display=a?"block":"none")}(e)}}})},reset:function(){c.anim.frame=0,c.anim.isPlaying=!1,c.ui.update()},start:function(){window.requestAnimFrame(m)}}}(30,!0),c.anim=new t(c.canvas.ctx,30,!0),c.draw=function(e,a){function t(){return e.anim.getDrawLayer()}function n(){return e.anim.drawings[e.anim.drawings.length-1]}function s(a,n){e.anim.updateProperty(a,n),t()[n]=a}function l(){!function(a,n){for(const r in a)void 0!==t()[r]&&(t()[r]=a[r],e.ui.faces[r]&&e.ui.faces[r].update(a[r],n))}(a)}function o(a){let s=n(),l=!s;s.length>0&&(l=!0),l&&(e.anim.drawings.push(new r),e.ui.faces.color.addColor(t().color),e.anim.layers.push(new i({linesInterval:+e.ui.faces.linesInterval.value,segmentNum:+e.ui.faces.segmentNum.value,jiggleRange:+e.ui.faces.jiggleRange.value,wiggleRange:+e.ui.faces.wiggleRange.value,wiggleSpeed:+e.ui.faces.wiggleSpeed.value,color:e.ui.faces.color.value,drawingIndex:e.anim.drawings.length-1,startFrame:+a||e.anim.currentFrame})),e.data.saveState()),e.ui.update()}function c(){const a=new UIModal({title:"Select Color",app:e,position:e.mousePosition});a.add(new UIColor({callback:a=>{s(a,"color"),e.ui.faces.color.el.value=a}})),e.ui.faces.color.colors.forEach((t=>{a.add(new UIButton({text:t,css:{background:t},value:t,callback:()=>{s(t,"color"),e.ui.faces.color.el.value=t,a.clear()}}))}))}function d(){const a="#"+Math.floor(16777215*Math.random()).toString(16);s(a,"color"),e.ui.faces.color.el.value=a}function m(){let a=parseInt(t().color.substr(1),16);a+=Cool.randomInt(-500,500),a=Math.max(0,a);const n="#"+a.toString(16);s(n,"color"),e.ui.faces.color.el.value=n}e.anim.drawings.push(new r),e.anim.layers.push(new i({...a,drawingIndex:Math.max(e.anim.drawings.length-1,0),startFrame:e.anim.currentFrame}));let u=!1,g=performance.now(),f=30,p=5,h=!1,w=new Cool.Vector;e.mousePosition=new Cool.Vector;let y=!1,v="points";function b(a,t){n().add(new Cool.Vector(a,t).divide(e.canvas.scale).round())}function x(a){performance.now()>f+g&&(g=performance.now(),e.mousePosition.x=a.pageX,e.mousePosition.y=a.pageY,h?e.mousePosition.distance(w)>p&&(b(Math.round(a.offsetX),Math.round(a.offsetY)),w=e.mousePosition.clone()):y&&function(a,t){let n=new Cool.Vector(a,t).divide(e.canvas.scale).round();for(let a=e.anim.layers.length-1;a>=0;a--){const t=e.anim.layers[a];if(t.isLocked)continue;if(!t.isInFrame(e.anim.currentFrame))continue;const r=e.anim.drawings[t.drawingIndex];for(let e=r.points.length-1;e>=0;e--){const a=new Cool.Vector(r.points[e]);if(n.distance(a)<10)if("lines"===v){let a=e,t=e;for(;"end"!==r.points[a]&&a>0;)a--;for(;"end"!==r.points[t]&&t<r.length;)t++;r.points.splice(a,t)}else"points"===self.eraseMethod&&(r.points[e]="end")}if("points"===self.eraseMethod)for(let e=r.points.length-1;e>=0;e--)"end"===r.points[e]&&"end"===r.points[e-1]&&r.points.splice(e,1),"end"===r.points[e+1]&&"end"===r.points[e-1]&&r.points.splice(e,1),"end"===r.points[e]&&0===e&&r.points.splice(e,1);0===r.points.length&&a!==e.anim.layers.length-1?t.removeIndex(e.anim.currentFrame,(function(){e.anim.layers.splice(a,1),o()})):r.update(t.drawProps)}}(Math.round(a.offsetX),Math.round(a.offsetY)))}function F(a){a.preventDefault(),a.which>=2&&(y=!0),1!=a.which||e.render.isPlaying||a.altKey?a.altKey&&(u=new Cool.Vector(Math.round(a.offsetX),Math.round(a.offsetY))):a.ctrlKey?y=!0:(h=!0,g=performance.now(),b(Math.round(a.offsetX),Math.round(a.offsetY)),w=e.mousePosition.clone())}function k(e){if(y=!1,u){const a=n(),t=Math.abs(u.x-e.offsetX),r=Math.abs(u.y-e.offsetY),i=t/r,s=t/(10*i/2),l=r/(1/i*10/2);let[o,c]=u.x<e.offsetX?[u.x,e.offsetX]:[e.offsetX,self.startDots.x],[d,m]=u.y<e.offsetY?[u.y,e.offsetY]:[e.offsetY,self.startDots.y];for(let e=o;e<c;e+=s)for(let t=d;t<m;t+=l){const n=Math.round(e)+Cool.randomInt(-s/2,s/2),r=Math.round(t)+Cool.randomInt(-l/2,l/2),i=Cool.randomInt(1,3);for(let e=0;e<i;e++)a.add(new Cool.Vector(n+Cool.randomInt(-1,1),r+Cool.randomInt(-1,1)));a.add("end")}u=!1}else if(1===e.which){h=!1;const a=n();let t=a.get(-2);"end"!==t&&"add"!==t&&a.length>1?a.add(e.shiftKey?"add":"end"):a.pop()}w=void 0}if(window.navigator.platform.includes("iPad")){const I={which:1},S=window.devicePixelRatio;function C(e,a){if(e.preventDefault(),e.touches[0]){const t=e.target.getBoundingClientRect();I.offsetX=e.targetTouches[0].pageX-t.left/S,I.offsetY=e.targetTouches[0].pageY-t.top/S,I.which=1,a(I)}}e.canvas.canvas.addEventListener("touchstart",(e=>{C(e,F)})),e.canvas.canvas.addEventListener("touchmove",(e=>{C(e,x)})),e.canvas.canvas.addEventListener("touchend",(e=>{k(I)}))}else window.PointerEvent?(e.canvas.canvas.addEventListener("pointermove",x),e.canvas.canvas.addEventListener("pointerdown",F),e.canvas.canvas.addEventListener("pointerup",k)):(e.canvas.canvas.addEventListener("mousemove",x),e.canvas.canvas.addEventListener("mousedown",F),e.canvas.canvas.addEventListener("mouseup",k));return document.addEventListener("mousemove",self.outSideCanvas),{connect:function(){e.ui.addProps({mouseInterval:{type:"UINumberRange",key:"m",value:f,callback:e=>{f=e},range:[0,100]},distanceThreshold:{type:"UINumberStep",key:"shift-m",range:[0,30],value:p,callback:e=>{p=e}}},"mouse"),e.ui.addCallbacks([{callback:c,key:"g",text:"Quick Color"},{callback:d,key:"shift-g",text:"Random Color"},{callback:m,key:"alt-g",text:"Color Variation"}],"lineColor"),e.ui.addProps({color:{type:"UIColor",callback:e=>{s("color",e)}},segmentNum:{type:"UINumberStep",range:[1,10],callback:e=>{s("segmentNum",e)}},jiggleRange:{type:"UINumberStep",range:[0,10],callback:e=>{s("jiggleRange",e)}},wiggleRange:{type:"UINumberStep",range:[0,16],callback:e=>{s("wiggleRange",e)}},wiggleSpeed:{type:"UINumberStep",range:[0,8],step:.005,callback:e=>{s("wiggleSpeed",e)}},wiggleSegments:{type:"UIToggle",callback:e=>{s("wiggleSegments",e)}},breaks:{type:"UIToggle",callback:e=>{s("breaks",e)}}},"draw"),e.ui.addCallbacks([{callback:o,key:"r",text:"Save Lines"},{callback:l,text:"Reset Defaults"}],"draw")},reset:o}}(c,{linesInterval:5,segmentNum:2,jiggleRange:1,wiggleRange:1,wiggleSpeed:.1,color:"#000000"}),c.bg=function(){let e=new Image,a=!0,t=0,n=0,r=0,i=0,s=1,l=0;return{connect:function(){c.ui.addUI({type:"UIText",placeholder:"URL",callback:a=>{var t;t=a,e.src=t,e.onload=function(){r=e.width,i=e.height}}},"bgImage"),c.ui.addUI({value:a,key:"alt-b",onText:"Hide",offText:"Show",callback:e=>{a=e}}),c.ui.addUI({type:"UINumberRange",value:t,label:"X",range:[-1024,1024],callback:e=>{t=e}}),c.ui.addUI({type:"UINumberRange",value:n,label:"Y",range:[-1024,1024],callback:e=>{n=e}}),c.ui.addUI({type:"UINumberRange",value:s,label:"Size",range:[.1,2],step:.1,callback:e=>{s=e}}),c.ui.addUI({type:"UINumberRange",value:l,label:"Rotation",range:[0,360],callback:e=>{l=e}})},display:function(){e.src&&a&&(l>0&&(c.canvas.ctx.save(),c.canvas.ctx.rotate(l*Math.PI/180)),c.canvas.ctx.drawImage(e,t,n,s*r,i*s),l>0&&c.canvas.ctx.restore())}}}(),c.data=function(e){let a=[],t=[],n=[];function i(){self.saveStates.current.drawings?(self.saveStates.prev.drawings=_.cloneDeep(self.saveStates.current.drawings),self.saveStates.prev.layers=_.cloneDeep(self.saveStates.current.layers)):(self.saveStates.prev.drawings=_.cloneDeep(e.anim.drawings),self.saveStates.prev.layers=_.cloneDeep(e.anim.layers)),self.saveStates.current.drawings=_.cloneDeep(e.anim.drawings),self.saveStates.current.layers=_.cloneDeep(e.anim.layers)}function s(){self.saveStates.prev.drawings?(e.anim.drawings=_.cloneDeep(self.saveStates.prev.drawings),e.anim.layers=_.cloneDeep(self.saveStates.prev.layers),self.saveStates.current.drawings=_.cloneDeep(self.saveStates.prev.drawings),self.saveStates.current.layers=_.cloneDeep(self.saveStates.prev.layers),self.saveStates.prev.drawings=void 0,self.saveStates.prev.layers=void 0):console.log("%c Can't undo ","color:lightblue;background:gray;"),e.ui.drawings.clear(),e.ui.update()}function l(){e.draw.reset(),a=[];for(let t=0;t<e.anim.layers.length-1;t++)e.anim.layers[t].isInFrame(e.anim.currentFrame)&&a.push(e.anim.layers[t])}function o(){self.saveState(),0==n.length&&n.push(e.anim.currentFrame);for(let t=0;t<n.length;t++)for(let r=0;r<a.length;r++){const i=a[r].addIndex(n[t]);i&&e.anim.addLayer(i)}n=[],e.draw.reset(),e.ui.update()}function c(){a=[];let t=+prompt("Number of copies: ",1);if(l(),t)for(let a=0;a<t;a++)e.ui.play.next(1),o();e.ui.update()}function d(){const a=+prompt("Start frame:"),n=+prompt("end frame:");t=[];for(let r=a;r<=n;r++){t[r]=[];for(let a=0;a<e.anim.layers.length-1;a++)e.anim.layers[a].isInFrame(r)&&t[r].push(e.anim.layers[a])}}function m(){for(let a=0;a<t.length;a++){const n=t[a];if(n)for(let a=0;a<n.length;a++){const t=n[a].addIndex(e.anim.currentFrame);t&&e.anim.addLayer(t)}e.ui.play.next(1)}e.draw.reset(),e.ui.update()}function u(){e.draw.drawing=new r}function g(){for(let a=e.anim.layers.length-2;a>=0;a--)if(e.anim.layers[a].isInFrame(e.anim.currentFrame)&&!(e.anim.layers[a].groupNumber>=0)){e.anim.layers[a].removeIndex(e.anim.currentFrame,(()=>{e.anim.layers.splice(a,1)}));break}e.ui.update()}function f(){for(let a=0;a<e.anim.layers.length-1;a++)if(e.anim.layers[a].isInFrame(e.anim.currentFrame)&&!(e.anim.layers[a].groupNumber>=0)){e.anim.layers[a].removeIndex(e.anim.currentFrame,(function(){e.anim.layers.splice(a,1)}));break}e.ui.update()}function p(){u(),function(){i();for(let a=e.anim.layers.length-2;a>=0;a--)e.anim.layers[a].isInFrame(e.anim.currentFrame)&&e.anim.layers[a].removeIndex(e.anim.currentFrame,(()=>{e.anim.layers.splice(a,1)}));e.ui.update()}()}function h(a){void 0!==a||e.anim.currentFrame;i();const t=e.anim.currentFrame;for(let a=e.anim.layers.length-2;a>=0;a--){const n=e.anim.layers[a];n.endFrame<t||(n.startFrame===t&&n.endFrame===t?e.anim.removeLayer(n):n.endFrame>t&&n.startFrame>t?(n.startFrame-=1,n.endFrame-=1):n.endFrame>t&&(n.endFrame-=1),n.resetTweens())}e.anim.updateStates(),e.ui.update()}function w(){i();const a=+prompt("Start frame:"),t=+prompt("End frame:");if(t>0){for(let e=t;e>=a;e--)self.deleteFrame(e);e.draw.cutEnd(),e.ui.play.setFrame(0)}}function y(){e.draw.pop()}function v(){e.draw.popOff()}function b(a){e.draw.reset(),i();for(let t=0,n=e.anim.layers.length-1;t<n;t++)e.anim.layers[t].shiftIndex(e.anim.currentFrame+a,1),e.anim.addLayer(e.anim.layers[t].removeIndex(e.anim.currentFrame+a));e.ui.play.next(a),e.ui.update()}function x(a){e.draw.reset();const t=+prompt("Number of frames?");for(let n=0;n<e.anim.layers.length-1;n++){const r=e.anim.layers[n];if(r.isInFrame(e.anim.currentFrame))switch(r.endFrame=r.startFrame+t,e.anim.state.end<r.endFrame&&(e.anim.state.end=r.endFrame),a){case"Draw":r.addTween({prop:"endIndex",startFrame:r.startFrame,endFrame:r.endFrame,startValue:0,endValue:e.anim.drawings[r.drawingIndex].length});break;case"Reverse":r.addTween({prop:"startIndex",startFrame:r.startFrame,endFrame:r.endFrame,startValue:0,endValue:e.anim.drawings[r.drawingIndex].length});break;case"DrawReverse":const a=Math.floor(t/2);r.addTween({prop:"endIndex",startFrame:r.startFrame,endFrame:r.startFrame+a,startValue:0,endValue:e.anim.drawings[r.drawingIndex].length}),r.addTween({prop:"startIndex",startFrame:r.startFrame+a,endFrame:r.endFrame,startValue:0,endValue:e.anim.drawings[r.drawingIndex].length})}}e.ui.update()}function F(a){let t=e.anim.layers.filter((e=>e.isToggled));if(0==t.length&&(t=e.anim.layers.filter((a=>a.isInFrame(e.anim.currentFrame)))),e.draw.reset(),t){if(i(),a||(a=new Cool.Vector(+prompt("x"),+prompt("y"))),a)for(let e=0;e<t.length;e++)t[e].x+=a.x,t[e].y+=a.y}else console.log("%c No layers in frame ","color:yellow; background:black;")}function k(){for(let a=0;a<e.anim.layers.length;a++){const t=e.anim.layers[a],n=e.anim.drawings[t.drawingIndex];for(let e=0;e<n.length;e++)n.points[e][0]+=t.x,n.points[e][1]+=t.y;t.x=0,t.y=0}}function I(){const a=[];for(let t=0;t<e.anim.drawings.length;t++){e.anim.drawings[t]&&a.push(t)}for(let t=0;t<e.anim.layers.length;t++){const n=e.anim.layers[t],r=a.indexOf(n.drawingIndex);n.drawingIndex=r}for(let a=e.anim.drawings.length;a>=0;a--)null==e.anim.drawings[a]&&e.anim.drawings.splice(a,1)}return{connect:function(){e.ui.getPanel("copy",{label:"Copy / Paste"}),e.ui.addCallbacks([{callback:l,key:"c",text:"Copy"},{callback:c,key:"shift-c",text:"Multi Copy"},{callback:o,key:"v",text:"Paste"},{callback:d,key:"alt-c",text:"Copy Range"},{callback:m,key:"alt-v",text:"Paste Range"}]),e.ui.getPanel("cut",{label:"Cut"}),e.ui.addCallbacks([{callback:u,key:"x",text:"Clear Lines"},{callback:v,key:"z",text:"Cut Last Line"},{callback:y,key:"shift-z",text:"Cut Last Segment"},{callback:h,key:"d",text:"Delete Frame"},{callback:w,key:"shift-d",text:"Delete Frame Range"},{callback:g,key:"ctrl-x",text:"Cut Top Layer"},{callback:f,key:"alt-x",text:"Cut Bottom Layer"},{callback:p,key:"shift-x",text:"Clear Frame"}]),e.ui.getPanel("data"),e.ui.addCallbacks([{callback:s,key:"ctrl-z",text:"Undo"},{callback:F,key:"shift-o",text:"Offset"},{callback:b,key:"i",text:"Insert Before",args:[0]},{callback:b,key:"shift-i",text:"Insert After",args:[1]},{callback:k,text:"Apply Offset"},{callback:I,text:"Prune Drawings"}]),e.ui.getPanel("animate"),e.ui.addCallbacks([{callback:x,key:"a",text:"Draw",args:["Draw"]},{callback:x,key:"shift-a",text:"Reverse",args:["Reverse"]},{callback:x,key:"ctrl-a",text:"Draw + Reverse",args:["DrawReverse"]}])},saveState:i}}(c),c.files=Files(c,{fit:!1,save:!1,load:!0,reload:!1,bg:!0}),c.ui=o(c,{useMain:!1}),c.ui.setup(),c.canvas.connect(),c.render.connect(),c.draw.connect(),c.bg.connect(),c.data.connect(),console.log(c)}();
//# sourceMappingURL=src_maps/animate.min.js.map
