!function(){"use strict";const{Animation:e,Animator:t,Drawing:n,Layer:i,AntiMixin:a,PixelMixin:l}=Lines,s={};Object.assign(i.prototype,LayerMixin),Object.assign(Lines.prototype,LinesMixin);const r={};location.search.substr(1).split("&").map((e=>{let[t,n]=e.split("=");r[t]=n})),"pixel"===r.render&&Object.assign(Lines.prototype,l),s.canvas=function(e,t=512,n=512,i="#ffffff",a=!0){const l=document.getElementById(e);let r=a&&window.devicePixelRatio||1,o=1,c=1;const u=this.canvas.getContext("2d");function d(){u.miterLimit=1,u.lineCap="round",u.lineJoin="round"}function g(e){l.style.backgroundColor=e}function p(e){t=e,l.width=e*self.dpr*self.scale,m()}function f(e){n=e,l.height=e*r*o,m()}function m(){u.scale(1,1),u.scale(r*o,r*o),l.style.zoom=1/r,u.lineWidth=c,d()}function y(){s.draw.reset();let e=0,t={x:1e4,y:1e4},n={x:0,y:0};for(let i=0;i<s.anim.layers.length;i++){const a=s.anim.layers[i],l=s.anim.drawings[a.drawingIndex];for(let i=0;i<l.length;i++){const s=l.points[i];"end"!==s&&"add"!==s&&(e=Math.max(e,4*a.jiggleRange),t.x=Math.min(t.x,s[0]+a.x),t.y=Math.min(t.y,s[1]+a.y),n.x=Math.max(n.x,s[0]+a.x),n.y=Math.max(n.y,s[1]+a.y))}}s.ui.faces.width.update(Math.round(n.x-t.x+2*e)),s.ui.faces.height.update(Math.round(n.y-t.y+2*e));for(let n=0;n<s.anim.layers.length-1;n++)s.anim.layers[n].x-=t.x-e>0?t.x-e:0,s.anim.layers[n].y-=t.y-e>0?t.y-e:0}return u.miterLimit=1,u.lineCap="round",u.lineJoin="round",g(i),p(t),f(n),{connect:function(){app.ui.addCallback({callback:y,text:"Fit Canvas",key:"shift-f"}),app.ui.addProps({width:{value:t,callback:e=>{p(e)}},height:{value:n,callback:e=>{f(e)}},lineWidth:{type:"UINumberStep",value:1,range:[1,100],callback:e=>{!function(e){u.lineWidth=c=+e,d()}(e)}},canvasScale:{type:"UINumberStep",value:1,range:[.5,4],step:.05,callback:e=>{!function(e){o=e,p(t),f(n)}(e)}},bgColor:{type:"UIColor",value:i,callback:e=>{g(e)}},hideCursor:{type:"UIToggleCheck",key:"alt-m",callback:e=>{e?l.classList.add("no-cursor"):l.classList.remove("no-cursor")}}},"canvas")},ctx:u}}("lines",512,512,"#ffffff",!0),s.render=Render(30,!0),s.anim=new Lines(s.canvas.ctx,30,!0),s.draw=new Draw({linesInterval:5,segmentNum:2,jiggleRange:1,wiggleRange:1,wiggleSpeed:.1,color:"#000000"}),s.bgImage=new Background,s.data=new Data,s.files=new Files({fit:!1,save:!1,load:!0,reload:!1,bg:!0});function o(e){s.ui.palette.setup(e.palettes)}s.ui=new Interface(s),s.ui.capture=new Capture({useSequentialNumbering:!0,captureSettings:{lineWidth:1,canvasScale:2}}),s.ui.states=new States,s.ui.palette=new Palette,s.ui.drawings=new Drawings,s.ui.play=new Play,s.ui.timeline=new Timeline,s.ui.animator=new AnimatorInterface,s.ui.settings=new Settings(s,"lns",(function(){return{palettes:s.ui.palette.palettes}}),["hideCursor"]),s.ui.load("./interface/interface.json",(function(){s.draw.setDefaults(),s.ui.settings.load(o),r.src&&s.files.loadFile(r.src.split(".")[0]),s.ui.update(),s.render.start(),s.ui.timeline.init(),s.render.toggleStats()})),s.uiUpdate=function(){s.ui.timeline.update(),s.ui.drawings.update(),s.ui.states.update()}}();
//# sourceMappingURL=src_maps/animate.min.js.map
