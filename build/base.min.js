Array.prototype.insert=function(t,e){this.splice(t,0,e)},Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)},"undefined"!=typeof window&&(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}),Cool={},Cool.map=function(t,e,s,i,n){return i+(n-i)*(t-e)/(s-e)||0},Cool.padNumber=function(t,e){let s=""+t;for(;s.length<e;)s="0"+s;return s},Cool.random=function(t,e){return e?Math.random()*(e-t)+t:"number"==typeof t?Math.random()*t:Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:"object"==typeof t?t[Cool.random(Object.keys(t))]:void 0},Cool.randomInt=function(t,e){return e||(e=t,t=0),Math.round(Math.random()*(e-t)+t)},Cool.randomNormalInverse=function(){let t=0,e=0;for(;0===t;)t=Math.random();for(;0===e;)e=Math.random();const s=Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e);let i=Cool.map(s,-3.5,3.5,0,1);return i>.5?i-.5:i+.5},Cool.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},Cool.HueToRgb=function(t,e,s){return s<0?s+=1:s>1&&(s-=1),255*(6*s<1?t+(e-t)*s*6:2*s<1?e:3*s<2?t+(e-t)*(2/3-s)*6:t)},Cool.hslToHex=function(t){for(var e=0,s=0,i=0,n=0,a=0,o=0,h=0;a<t.length;a++){var d=t.charCodeAt(a);if(d>=48&&d<=57)n=10*n+(d-48),h=1;else{if(1===h){switch(o){case 0:e=n%360/360;break;case 1:s=(n>100?100:n)/100;break;case 2:i=(n>100?100:n)/100}o++}h=0,n=0}}var l=e/(1/6),m=(t=(1-Math.abs(2*i-1))*s)*(1-Math.abs(l%2-1));switch(0|l){case 0:r=t,g=m,b=0;break;case 1:r=m,g=t,b=0;break;case 2:r=0,g=t,b=m;break;case 3:r=0,g=m,b=t;break;case 4:r=m,g=0,b=t;break;case 5:r=t,g=0,b=m}var c=i-.5*t;r+=c,g+=c,b+=c,r=255*r|0,g=255*g|0,b=255*b|0;var u="";return(h=48+(r>>4&15))>57&&(h+=7),u+=String.fromCharCode(h),(h=48+(15&r))>57&&(h+=7),u+=String.fromCharCode(h),(h=48+(g>>4&15))>57&&(h+=7),u+=String.fromCharCode(h),(h=48+(15&g))>57&&(h+=7),u+=String.fromCharCode(h),(h=48+(b>>4&15))>57&&(h+=7),u+=String.fromCharCode(h),(h=48+(15&b))>57&&(h+=7),u+=String.fromCharCode(h)},Cool.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},Cool.rgbToHsl=function(t){t.r/=255,t.g/=255,t.b/=255;var e,s,i=Math.max(t.r,t.g,t.b),n=Math.min(t.r,t.g,t.b),r=(i+n)/2;if(i==n)e=s=0;else{var a=i-n;switch(s=r>.5?a/(2-i-n):a/(i+n),i){case t.r:e=(t.g-t.b)/a+(t.g<t.b?6:0);break;case t.g:e=(t.b-t.r)/a+2;break;case t.b:e=(t.r-t.g)/a+4}e/=6}return[360*e+.5|0,100*s+.5|0,100*r+.5|0]},Cool.rgb2hex=function(t){var e=t.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):t},Cool.keys={9:"tab",13:"enter",27:"escape",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",186:";",187:"+",192:"`",220:"backslash",222:"'"},Cool.Vector=function(t,e){this.x=t||0,this.y=e||0,Array.isArray(this.x)&&(this.x=t[0],this.y=t[1]),this.random=function(t,e,s,i){return 1==arguments.length?(this.x=Cool.random(-t,t),this.y=Cool.random(-t,t)):2==arguments.length?(this.x=Cool.random(t,e),this.y=Cool.random(t,e)):4==arguments.length?(this.x=Cool.random(t,e),this.y=Cool.random(s,i)):console.error("You need 1, 2 or 4 arguments, dingus."),this},this.zero=function(){return!(Math.abs(this.x)>0||Math.abs(this.y)>0)},this.add=function(t){return this.x+=t.x,this.y+=t.y,this},this.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},this.multiply=function(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this},this.divide=function(t){return"object"==typeof t?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t),this},this.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.normalize=function(){var t=this.magnitude();return 0!=t&&1!=t&&this.divide(t),this},this.copy=function(){return new Cool.Vector(this.x,this.y)},this.dist=function(t){var e=new Cool.Vector(t.x,t.y);return e.subtract(this),e.magnitude()},this.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y)},this.getObj=function(){return{x:this.x,y:this.y}},this.clone=function(){return new Cool.Vector(this.x,this.y)}},Cool.mobilecheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},"undefined"!=typeof module&&(module.exports=Cool);class Animator{constructor(t,e){this.animation=t,this.params={segmentNum:[1,5],jiggleRange:[0,9],wiggleRange:[0,10],wiggleSpeed:[0,4],linesInterval:[1,10],startIndex:[0,"end"],endIndex:[0,"end"],...e}}update(){this.animation.layers.forEach(t=>{if(t.tweens.length){const e=t.tweens[0].prop;["startIndex","endIndex"].includes(e)||(t[e]=t.tweens[0].endValue)}t.tweens=[];const e=Cool.choice(...Object.keys(this.params));if("startIndex"===e||"endIndex"===e){const s={prop:e,startFrame:0,endFrame:this.animation.endFrame,startValue:0,endValue:this.animation.drawings[t.drawingIndex].length-1};t.tweens.push(s)}else if(Cool.chance(.5))t[e]=Cool.randomInt(this.params[e][0],this.params[e][1]);else{const s={prop:e,startFrame:0};s.endFrame=this.animation.endFrame,s.startValue=t[e],s.endValue=Cool.randomInt(this.params[e][0],this.params[e][1]),t.tweens.push(s)}})}}class Drawing{constructor(t){if(this.points=[],this.offsets=[],t)for(let e=0;e<t.length;e++)this.add(t[e]);this.lastDrawCount=0,this.firstUpdate=!0}add(t){"add"===t||1===t?this.points.push("add"):"end"===t||0===t?this.points.push("end"):Array.isArray(t)?this.points.push(t):this.points.push([t.x,t.y]),this.offsets.push([[0,0],[0,0]])}pop(){return this.offsets.pop(),this.points.pop()}get(t){return t<0?[this.points[this.points.length-t],this.offsets[this.offsets.length-t]]:[this.points[t],this.offsets[t]]}get length(){return this.points.length}get needsUpdate(){return this.lastDrawCount<drawCount&&(this.lastDrawCount=drawCount,!0)}update(t){const{segmentNum:e,jiggleRange:s,wiggleRange:i,wiggleSpeed:n,wiggleSegments:r}=t,a=[Cool.random(-n,n),Cool.random(-n,n)],o=[Cool.random(0,i),Cool.random(0,i)];for(let t=0,n=this.points.length;t<n;t++)if("end"!==this.points[t]){this.offsets[t]=[];for(let n=0;n<e;n++)i>0&&(0===n||r)&&(o[0]+=a[0],o[1]+=a[1],(o[0]>=i||o[0]<=-i)&&(a[0]*=-1),(o[1]>=i||o[1]<=-i)&&(a[1]*=-1)),this.offsets[t].push([Cool.random(-s,s)+o[0],Cool.random(-s,s)+o[1]])}}}class Layer{constructor(t,e){this.drawingIndex=t.drawingIndex,this.tweens=t.tweens||[],this.x=t.x||0,this.y=t.y||0,this._startFrame=t.startFrame,this._endFrame=t.endFrame||t.startFrame,this.drawingStartIndex=t.drawingStartIndex||0,this.drawingEndIndex=t.drawingEndIndex||-1,this.color=t.color||"#000000",this.segmentNum=t.segmentNum,this.jiggleRange=t.jiggleRange,this.wiggleRange=t.wiggleRange,this.wiggleSpeed=t.wiggleSpeed,this.wiggleSegments=t.wiggleSegments||!1,this.breaks=t.breaks||!1,this.linesInterval=t.linesInterval,this.linesCount=t.linesCount||0}get startFrame(){return this._startFrame}set startFrame(t){this._startFrame=Math.max(0,+t),this.resetTweens()}get endFrame(){return this._endFrame}set endFrame(t){this._endFrame=Math.max(0,+t)}isInFrame(t){return t>=this.startFrame&&t<=this.endFrame}get drawProps(){const t={segmentNum:this.segmentNum,jiggleRange:this.jiggleRange,wiggleRange:this.wiggleRange,wiggleSpeed:this.wiggleSpeed,wiggleSegments:this.wiggleSegments,x:this.x,y:this.y,color:this.color,startIndex:this.drawingStartIndex,endIndex:this.drawingEndIndex,breaks:this.breaks,linesInterval:this.linesInterval};return this.tweens&&(t.tweens=this.tweens),t}}class Lines{constructor(t,e,s){this.ctx=t,this.isLoaded=!1,this.isPlaying=!1,this.multiColor=s||!1,this.drawings=[],this.layers=[],this.dps=e||30,this.fps=5,this.currentFrame=0,this.drawsPerFrame=Math.round(this.dps/this.fps),this.drawCount=0,this.override={},this._state="default",this.states={default:{start:0,end:0}},this.layerColor}randomCount(){this.drawCount=Cool.randomInt(this.drawsPerFrame)}set fps(t){this._fps=+t,this.drawsPerFrame=Math.round(this.dps/this.fps),this.drawCount=0}get fps(){return this._fps}set frame(t){this.currentFrame=+t,this.states.default&&this.states.default.end!=this.endFrame&&(this.states.default.end=this.endFrame)}get endFrame(){const t=this.layers.map(t=>t.endFrame);return Math.max.apply(Math,t)}set state(t){this._state!=t&&this.states[t]&&(this._state=t,this.state&&(this.frame=this.state.start))}get state(){return this.states[this._state]}get stateName(){return this._state}setLinesUpdate(t){this.layers.forEach(e=>{e.linesInterval=t})}overrideProperty(t,e){this.override[t]=e}cancelOverride(){this.override={}}update(){this.isPlaying&&(this.drawCount===this.drawsPerFrame&&(this.currentFrame>=this.state.end?(this.currentFrame=this.state.start,this.onPlayedState&&this.onPlayedState(),this.onPlayedOnce&&this.onPlayedOnce()):this.currentFrame++,this.drawCount=0),this.drawCount++,this.onUpdate&&this.onUpdate())}finish(){this.ctx.stroke()}setColor(t){this.ctx.strokeStyle!==t&&(this.ctx.strokeStyle=t)}getColor(){return this.ctx.strokeStyle}getLayers(){let t=[];for(let e=0,s=this.layers.length;e<s;e++)this.layers[e].isInFrame(this.currentFrame)&&t.push(this.layers[e]);return t}draw(t,e,s){let i=this.getColor();this.ctx.beginPath();const n=this.getLayers();for(let r=0,a=n.length;r<a;r++){const a=n[r],o=this.drawings[a.drawingIndex],h=a.drawProps;if(t&&(h.x+=t),e&&(h.y+=e),h.tweens.length)for(let t=0;t<h.tweens.length;t++){const e=h.tweens[t];e.startFrame<=this.currentFrame&&e.endFrame>=this.currentFrame&&(h[e.prop]=Cool.map(this.currentFrame,e.startFrame,e.endFrame,e.startValue,e.endValue),"startIndex"!==e.prop&&"endIndex"!==e.prop&&"segmentNum"!==e.prop||(h[e.prop]=Math.round(h[e.prop])))}for(const t in this.override)h[t]=this.override[t];o.firstUpdate?(o.firstUpdate=!1,o.update(h)):s||(a.linesCount>=a.linesInterval&&o.needsUpdate?(o.update(h),a.linesCount=0):o.needsUpdate&&a.linesCount++),this.multiColor&&h.color!==i&&(this.finish(),this.setColor(h.color),i=h.color,this.ctx.beginPath());let d=h.endIndex<0?o.length-1:h.endIndex-1;for(let t=h.startIndex;t<d;t++){const e=o.get(t);if("end"===e[0]||"add"===e[0])continue;let s=o.get(t+1);if("end"!==s[0]){if("add"===s[0]){s=o.get(0);for(let e=t;e>0;e--){let t=o.get(e)[0];if("end"===t||"add"===t){s=o.get(e+1);break}}}this.drawLines(e,s,h)}}}this.finish(),this.onDraw&&this.onDraw()}drawLines(t,e,s){if(this.ctx.moveTo(s.x+t[0][0]+t[1][0][0],s.y+t[0][1]+t[1][0][1]),1===s.segmentNum)this.ctx.lineTo(s.x+e[0][0]+e[1][0][0],s.y+e[0][1]+e[1][0][1]);else{const i=[(e[0][0]-t[0][0])/s.segmentNum,(e[0][1]-t[0][1])/s.segmentNum];for(let n=1;n<s.segmentNum;n++){const r=[t[0][0]+i[0]*n,t[0][1]+i[1]*n];let a=[];a=n!==s.segmentNum-1||s.breaks?t[1][n]:e[1][0],this.ctx.lineTo(s.x+r[0]+i[0]+a[0],s.y+r[1]+i[1]+a[1])}}}load(t,e){fetch(t).then(t=>t.json()).then(t=>{this.loadData(t,e)}).catch(t=>{console.error(t)})}loadJSON(t,e){this.loadData(t,e)}loadData(t,e){this.isLoaded=!0;for(let e=0;e<t.d.length;e++)this.drawings[e]=t.d[e]?new Drawing(t.d[e]):null;const s=Math.round(5*Math.random());for(let e=0;e<t.l.length;e++){const i=this.loadParams(t.l[e]);i.drawingEndIndex=this.drawings[i.drawingIndex].length,i.linesCount=s;const n=new Layer(i);this.layers[e]=n}for(const e in t.s)this.states[e]={start:t.s[e][0],end:t.s[e][1]};this.states.default&&(this.states.default.end=this.endFrame),this.fps=t.fps,t.mc&&(this.multiColor=t.mc),this.width=t.w,this.height=t.h,e&&e(t),this.onLoad&&this.onLoad()}loadParams(t){const e={drawingIndex:t.d,startFrame:t.f[0],endFrame:t.f[1],x:t.x||0,y:t.y||0,color:t.c,segmentNum:t.n,jiggleRange:t.r,wiggleRange:t.w,wiggleSpeed:t.v,wiggleSegments:t.ws,breaks:t.b||!1,linesInterval:t.l||5};return t.t&&(e.tweens=t.t.map(t=>({prop:t[0],startFrame:t[1],endFrame:t[2],startValue:t[3],endValue:t[4]}))),t.o&&(e.order=t.o),e}setOnLoad(t){this.isLoaded?t():this.onLoad=t}}class PixelLines extends Lines{constructor(t,e,s,i){super(t,e,s),this.pixelSize=i||1,this.pixelM=this.pixelSize}finish(){this.ctx.fill()}setColor(t){this.ctx.fillStyle!==t&&(this.ctx.fillStyle=t)}getColor(){return this.ctx.fillStyle}drawLines(t,e,s,i){if(1===s.segmentNum)this.simplePixelLine(s.x+t[0]+i[0][0],s.y+t[1]+i[0][1],s.x+e[0]+i[1][0],s.y+e[1]+i[1][1]);else{const n=[(e[0]-t[0])/s.segmentNum,(e[1]-t[1])/s.segmentNum];for(let e=0;e<s.segmentNum;e++){const r=[t[0]+n[0]*e,t[1]+n[1]*e],a=[t[0]+n[0]*(e+1),t[1]+n[1]*(e+1)];s.breaks;this.simplePixelLine(s.x+r[0]+i[e][0],s.y+r[1]+i[e][1],s.x+a[0]+i[e+1][0],s.y+a[1]+i[e+1][1])}}}setPixelM(t){this.pixelM=Math.ceil(this.pixelSize*t)}simplePixelLine(t,e,s,i){t=Math.round(t/this.pixelSize),e=Math.round(e/this.pixelSize),s=Math.round(s/this.pixelSize),i=Math.round(i/this.pixelSize);let n=Math.abs(s-t),r=Math.abs(i-e),a=t<s?1:-1,o=e<i?1:-1,h=n-r;for(;this.ctx.rect(t*this.pixelM,e*this.pixelM,this.pixelM,this.pixelM),t!==s||e!==i;){let s=2*h;s>-r&&(h-=r,t+=a),s<n&&(h+=n,e+=o)}}pixelLine(t,e,s,i){const n=this.ctx.lineWidth;t=Math.round(t),s=Math.round(s),e=Math.round(e),i=Math.round(i);const r=Math.abs(s-t),a=t<s?1:-1,o=Math.abs(i-e),h=e<i?1:-1;let d,l,m,g=r;if(r>o){if(d=r/2,m=t>s?1:0,o>1){d=0,g=o-1;do{l=d/o+2|0,this.ctx.rect(t-l*m,e,l,n),t+=l*a,e+=h,d-=l*o-r}while(g--)}d>0&&this.ctx.rect(t,i,s-t,n)}else if(r<o){if(d=o/2,m=e>i?1:0,r>1){d=0,g--;do{l=d/r+2|0,this.ctx.rect(t,e-l*m,n,l),e+=l*h,t+=a,d-=l*r-o}while(g--)}d>0&&this.ctx.rect(s,e,n,i-e)}else do{this.ctx.rect(t,e,n,n),t+=a,e+=h}while(g--)}}
//# sourceMappingURL=src_maps/base.min.js.map
